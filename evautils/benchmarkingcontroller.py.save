#!/usr/bin/python

import os
import gzip
import re

def narrowPeaksToBed(narrowPeaksFile, regionSize, bedfile):
	fp_np = gzip.open(narrowPeaksFile)
	fp_bed = open(bedfile, 'w')
	for line in fp_np:
        	match = re.match("(\S+)\s+(\d+)\s+\S+\s+\S+\s+\S+\s+\S+\s+\S+\s+\S+\s+\S+\s+(\d+)\s*$", line)
        	if match:
                	chrom = match.group(1)
                	chromStart = int(match.group(2))
                	chromSummitOffset = int(match.group(3))
                	regionStart = chromStart + chromSummitOffset - int(regionSize/2)
                	regionEnd = regionStart + regionSize
                	fp_bed.write(chrom + "\t" + str(regionStart) + "\t" + str(regionEnd))
	fp_np.close()
	fp_bed.close()
	cmd = 'gzip ' + bedfile
        os.system(cmd)

def getExclusiveSets(posBedFile, negBedFile, noPosNegBedFile):
	cmd = 'intersectBed -v -a '+universal_dnase_narrowPeaks_bedfile_400bp.gzw -b H1ESC_narrowPeaks_bedfile_400bp.gz -wa | gzip -c > no_H1ESC_universal_dnase_narrowPeaks_bedfile_400bp.bed.
gz
